<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Swish QR</title>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
</head>
<body>
<div id="outer" style="width:100%">
    <div id="inner" style="display: table;margin: 0 auto;">
        <div id="qr">

        </div>
        <p>
            Klicka på QR koden för att öppna appen.<br>
            Eller om du har swish appen på en annan enhet<br> skanna koden med appen
        </p>
    </div>
</div>
<script>
    function findGetParameter(parameterName) {
        var result = null,
            tmp = [];
        location.search
            .substr(1)
            .split("&")
            .forEach(function (item) {
                tmp = item.split("=");
                if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
            });
        return result;
    }
    function escapeHtml(html){
        var text = document.createTextNode(html);
        var p = document.createElement('p');
        p.appendChild(text);
        return p.innerHTML;
    }

    var data = '<a href="https://swishqr.wwn.se/url.php?payee=%payee%&amount=%amount%&message=%message%"><img src="https://swishqr.wwn.se/api.php?payee=%payee%&amount=%amount%&message=%message%"/></a><br>'
    data = data.replace('%payee%',findGetParameter('payee'));
    data = data.replace('%message%',findGetParameter('message'));
    data = data.replace('%amount%',findGetParameter('amount'));
    data = data.replace('%payee%',findGetParameter('payee'));
    data = data.replace('%message%',findGetParameter('message'));
    data = data.replace('%amount%',findGetParameter('amount'));
    var qr = document.getElementById("qr")
    qr.innerHTML = data;
    //document.body.innerHTML = data;

  /*  var c = document.createElement('code');
    c.innerHTML = escapeHtml(data);
    document.body.appendChild(c);*/
</script>
</body>
</html>